Based on https://www.sitepoint.com/quick-tip-game-loop-in-javascript/
